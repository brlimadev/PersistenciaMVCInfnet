Aula 02 - Persistencia MVC

04:00 Dentro do Application criar a pasta Admin e dentro dela o UsuarioAdminService.cs e as pastas DTO e Profile


namespace Spotify.Application.Admin.Dto
{
    public class UsuarioAdminDto
    {
        public Guid Id { get; set; }
        public String Nome { get; set; }
        public String Email { get; set; }
        public String Password { get; set; }
        public int Perfil { get; set; }
    }
}



namespace Spotify.Application.Admin.Profile
{
    public class UsuarioAdminProfile : AutoMapper.Profile
    {
        public UsuarioAdminProfile()
        {
            CreateMap<UsuarioAdminDto, UsuarioAdmin>()
                .ForMember(x => x.Perfil, m => m.MapFrom(f => (Perfil)f.Perfil))
                .ReverseMap();

        }

    }
}


namespace Spotify.Application.Admin
{
    public class UsuarioAdminService
    {
        private UsuarioAdminRepository Repository { get; set; }
        private IMapper mapper { get; set; }
        public UsuarioAdminService(UsuarioAdminRepository repository, IMapper mapper)
        {
            Repository = repository;
            this.mapper = mapper;
        }

        public IEnumerable<UsuarioAdminDto> ObterTodos()
        {
            var result = this.Repository.GetAll();
            return this.mapper.Map<IEnumerable<UsuarioAdminDto>>(result);
        }
    }
}

12:00 Acrescentar o pacote do automapper mo projeto do admin


13:00 Adicionar no program.cs o automapper


builder.Services.AddAutoMapper(typeof(UsuarioAdminProfile).Assembly);

builder.Services.AddScoped<UsuarioAdminRepository>();
builder.Services.AddScoped<UsuarioAdminService>();



24:00

Trocar no meu repositorio base mais especialista vou substituir o nome pelo tipo dentro do RepositoryBase.cs

Antes
        protected SpotifyLikeContext Context { get; set; }
Depois
        protected DbContext Context { get; set; }

Antes
        public RepositoryBase(SpotifyLikeContext context)
Depois
        public RepositoryBase(DbContext context)


Criar a tela de index no getbootstrap do google



